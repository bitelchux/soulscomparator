var e={DkS1:"darksouls1",DkS2:"darksouls2"};var t=300;String.prototype.capitalize=function(){return this,this.charAt(0).toUpperCase()+this.slice(1)};var s=new Firebase("https://darksoulscomparator.firebaseIO.com");var a={armors:[],shields:[],weapons:[],pieces:{head:[],chest:[],hands:[],legs:[]}};var r=null;var i={1:null,2:null};var n=e.DkS1;var l=null;o();function o(){s.child(n+"/indexes").on("value",function(e){data=e.val();a.weapons=data.weapons[R(data.weapons)];a.armors=data.armors[R(data.armors)];a.shields=data.shields[R(data.shields)];a.pieces=data.pieces[R(data.pieces)];console.log("indexes",a);m();$("#type").removeAttr("disabled");$("#type").selectpicker("refresh");$("select.basic-comparator").on("change",function(e){var t=unescape($(this).val());var s=$(this).attr("data-item");var r=$("#type").val();var i=a[r].filter(function(e){return R(e)===t})[0][t];p(s,i)});$("select.detailed-comparator").on("change",function(e){var t=unescape($(this).val());var s=$(this).attr("data-item");var r=$(this).attr("data-piece");var i=0;if(t!=="naked"&&t){i=a.pieces[r].filter(function(e){return R(e)===t})[0][t]}h(s,r,i)})})}function d(){$("#comparison").html("");$("#by-widgets").hide();$("#by").selectpicker("val",null);$("#detailed-widgets").hide();$("#basic-widgets").hide();$(".basic-level").selectpicker("val",null);P();D()}$(document).ready(function(){P();$("#game").on("change",function(e){n=$(this).val();d();$("#type").attr("disabled","");$("#type").selectpicker("val",null);o()});$("#type").on("change",function(e){r=$(this).val();d();if(r==="armors"){u()}else{c()}});$(".set-comparator").on("change",function(e){var t=$(this).val();var s=$(this).attr("data-item");if(t==="custom"){w(s)}else{t=unescape(t);var r=a.armors.filter(function(e){return R(e)===t})[0][t];P(s);f(s,r)}var i=unescape($('.set-comparator[data-item="1"]').selectpicker("val"));var n=unescape($('.set-comparator[data-item="2"]').selectpicker("val"));if(i==="custom"||n==="custom"){$("#detailed-widgets").show()}else{$("#detailed-widgets").hide()}});$("button#compare").on("click",function(t){S();var s=unescape($(this).val());if(r==="armors"){var a=v().then(function(t){if(n===e.DkS1){l=new C({el:"#comparison"});l.render(t[0],t[1])}else if(n===e.DkS2){l=new F({el:"#comparison"});l.render(t[0],t[1])}V(t[0],t[1],r).then(function(e){l.renderSetsEvolution(e[0],e[1])});x()}).catch(function(e){alert(e);x()})}else{var a=g().then(function(t){var s=r==="shields";if(n===e.DkS1){l=new E({el:"#comparison"});l.render(t[0],t[1],s)}else if(n===e.DkS2){l=new N({el:"#comparison"});l.render(t[0],t[1],s)}A(t[0].name,t[1].name,r).then(function(e){if(r==="weapons"){l.renderWeaponsEvolution(e[0],e[1])}else{l.renderShieldsEvolution(e[0],e[1]);l.renderReductionsChart(t[0],t[1])}});x()}).catch(function(e){alert(e);x()})}})});Handlebars.registerHelper("toTitleCase",function(e){return e.split("_").map(function(e){return e[0].toUpperCase()+e.slice(1,e.length)}).join(" ")});function c(){var e="";a[r].map(function(e){return R(e)}).sort().forEach(function(t){e+='<option value="'+escape(t)+'">'+t+"</option>"});$("select.basic-comparator").html(e);$("select.basic-comparator").selectpicker("refresh");$("#basic-widgets").show()}function u(){var e='<option value="custom">Custom</option>';e+='<optgroup label="Sets">';a[r].map(function(e){return R(e)}).sort().forEach(function(t){e+='<option value="'+escape(t)+'">'+t+"</option>"});e+="</optgroup>";$("select.set-comparator").html(e);$("select.set-comparator").selectpicker("refresh");$("#by-widgets").show()}function m(){Object.keys(a.pieces).forEach(function(e){var t='<option value="naked">Naked</option>';t+='<option data-divider="true"></option>';var s=a.pieces[e].map(function(e){return R(e)}).sort();s.forEach(function(e){t+='<option value="'+escape(e)+'">'+e+"</option>"});var r=$('select.detailed-comparator[data-piece="'+e+'"]');r.html(t);r.selectpicker("refresh")})}function p(e,t){var s='<option value="0" selected>0</option>';for(var a=1;a<=t;a++){s+='<option value="'+a+'">+'+a+"</option>"}var r=$('select.basic-level[data-level="'+e+'"]');r.html(s);r.selectpicker("refresh")}function h(e,t,s){var a='<option value="0" selected>0</option>';for(var r=1;r<=s;r++){a+='<option value="'+r+'">+'+r+"</option>"}var i=$('select.detailed-level[data-level="'+e+'"][data-piece="'+t+'"]');i.html(a);i.selectpicker("refresh")}function f(e,t){var s='<option value="0" selected>0</option>';for(var a=1;a<=t;a++){s+='<option value="'+a+'">+'+a+"</option>"}var r=$('select.set-level[data-level="'+e+'"]');r.html(s);r.selectpicker("refresh")}function g(){var e=unescape($('.basic-comparator[data-item="1"]').selectpicker("val"));var t=unescape($('.basic-comparator[data-item="2"]').selectpicker("val"));var a=unescape($('.basic-level[data-level="1"]').selectpicker("val"));var i=unescape($('.basic-level[data-level="2"]').selectpicker("val"));return new Promise(function(l,o){var d,c;var u=a!=="0"?e+" +"+a:e;var m=i!=="0"?t+" +"+i:t;s.child(n+"/"+r).orderByChild("name").equalTo(u).once("value",function(e){var t=e.val();d=t[Object.keys(t)[0]];if(d&&c)l([d,c])});s.child(n+"/"+r).orderByChild("name").equalTo(m).once("value",function(e){var t=e.val();c=t[Object.keys(t)[0]];if(d&&c)l([d,c])})})}function v(){var e=unescape($('.set-comparator[data-item="1"]').selectpicker("val"));var t=unescape($('.set-comparator[data-item="2"]').selectpicker("val"));return new Promise(function(s,a){var r,i;if(e==="custom"){var n=y(k(1))}else{var l=$('select.set-level[data-level="1"]').selectpicker("val");var o=l!=="0"?e+" +"+l:e;var n=b(o)}n.then(function(e){r=e;if(r&&i)s([r,i])});if(t==="custom"){var d=y(k(2))}else{var l=$('select.set-level[data-level="2"]').selectpicker("val");var c=l!=="0"?t+" +"+l:t;var d=b(c)}d.then(function(e){i=e;if(r&&i)s([r,i])})})}function b(e){console.log("looking for set",e);return new Promise(function(t,a){s.child(n+"/armors").orderByChild("set").equalTo(e).once("value",function(e){var s=e.val();console.log("data",s);var a={pieces:[]};Object.keys(s).forEach(function(e){a.pieces.push(s[e])});t(a)})})}function y(e){return new Promise(function(t,r){var i={pieces:[]};Object.keys(a.pieces).forEach(function(a){if(e[a]){var r=unescape(e[a]);var l=new Promise(function(e,t){if(r!=="naked"){s.child(n+"/armors").orderByChild("name").equalTo(r).once("value",function(t){var s=t.val();var r=null;if(s===null){r=new I("Error fetching "+a.capitalize(),a)}else{r=s[Object.keys(s)[0]]}e(r)})}else{var i=new I("Naked "+a.capitalize(),a);e(i)}});l.then(function(s){i.pieces.push(s);if(i.pieces.length===Object.keys(e).length){t(i)}})}})})}function k(e){var t={};Object.keys(a.pieces).forEach(function(s){var a=$('select.detailed-comparator[data-item="'+e+'"][data-piece="'+s+'"]').selectpicker("val");var r=$('select.detailed-level[data-level="'+e+'"][data-piece="'+s+'"]').selectpicker("val");t[s]=r!=="0"?a+" +"+r:a});return t}function A(e,t,a){var r=e.split("+")[0].trim();var i=t.split("+")[0].trim();return new Promise(function(e,t){var l,o;s.child(n+"/"+a).orderByChild("name").startAt(r).endAt(r+" +999").once("value",function(t){var s=t.val();l={name:r,data:Object.keys(s).map(function(e){return s[e]})};if(l&&o)e([l,o])});s.child(n+"/"+a).orderByChild("name").startAt(i).endAt(i+" +999").once("value",function(t){var s=t.val();o={name:i,data:Object.keys(s).map(function(e){return s[e]})};if(l&&o)e([l,o])})})}function V(e,t){var a,r;return new Promise(function(i,l){var o=new Promise(function(t,a){var r=[];e.pieces.forEach(function(e){var a=e.name.split("+")[0].trim();s.child(n+"/armors").orderByChild("name").startAt(a).endAt(a+" +999").once("value",function(e){var s=e.val();r.push({name:a,data:Object.keys(s).map(function(e){return s[e]})});if(r.length===4)t(r)})})});var d=new Promise(function(e,a){var r=[];t.pieces.forEach(function(t){var a=t.name.split("+")[0].trim();s.child(n+"/armors").orderByChild("name").startAt(a).endAt(a+" +999").once("value",function(t){var s=t.val();r.push({name:a,data:Object.keys(s).map(function(e){return s[e]})});if(r.length===4)e(r)})})});o.then(function(e){a=e;if(a&&r)i([a,r])});d.then(function(e){r=e;if(a&&r)i([a,r])})})}function x(){$("button#compare").removeAttr("disabled")}function S(e){$("button#compare").attr("disabled","")}function w(e){var t=e?'[data-item="'+e+'"]':"";var s=$("select.detailed-comparator"+t);s.removeAttr("disabled");s.selectpicker("refresh");var a=e?'[data-level="'+e+'"]':"";s=$("select.detailed-level"+a);s.removeAttr("disabled");s.selectpicker("refresh");var r=$("select.set-level"+a);r.attr("disabled","");r.selectpicker("refresh")}function P(e){var t=e?'[data-item="'+e+'"]':"";var s=$("select.detailed-comparator"+t);s.attr("disabled","");s.selectpicker("refresh");var a=e?'[data-level="'+e+'"]':"";s=$("select.detailed-level"+a);s.attr("disabled","");s.selectpicker("refresh");var r=$("select.set-level"+a);r.removeAttr("disabled");r.selectpicker("refresh")}function D(){$("select.detailed-comparator").selectpicker("deselectAll");$("select.detailed-level").selectpicker("deselectAll")}function R(e){return Object.keys(e)[0]}var B=function(){var e=Handlebars.compile($("#attribute-template").html());var s=Handlebars.compile($("#image-template").html());var a=Handlebars.compile($("#chart-box-template").html());var r=["-","–","S","A","B","C","D","E"];var i=function(e,t){if(e!==t){if(e==="S"){return-1}else if(t==="S"){return 1}else if(e==="-"&&t!=="-"){return 1}else if(e!=="-"&&t==="-"){return-1}else{if(e>t)return 1;if(e<t)return-1}}else{return 0}};return{renderAttribute:function(t,s,a,n,l){l=l||{};var o=color2="",d="=";if(l.isNegative){goodColor="red";badColor="blue"}else{goodColor="blue";badColor="red"}if(l.invertSymbols){biggerThanSymbol="<";lesserThanSymbol=">"}else{biggerThanSymbol=">";lesserThanSymbol="<"}if(!l.isString){a=a==="–"||a==="-"||a===""?0:parseFloat(a);n=n==="–"||n==="-"||n===""?0:parseFloat(n)}if(i(a,n)>0){o=goodColor;color2=badColor;d=biggerThanSymbol}else if(i(a,n)<0){o=badColor;color2=goodColor;d=lesserThanSymbol}if(!l.isInteger&&!l.isPercentage){a=r.indexOf(a)>=0?a:a.toFixed(1);n=r.indexOf(n)>=0?n:n.toFixed(1)}if(l.isPercentage){a=a+"%";n=n+"%"}var c={key:s,icon:{icon:t,caption:s},color1:o,color2:color2,value1:a,value2:n,symbol:d};if(l.notIcon)delete c.icon;return e(c)},renderImage:function(e,t,a){var r=e[t];var i=e[a];return s({name:unescape(e.name),source:e.wiki_image,title1:t,title2:a,type1:r,type2:i})},renderChartBox:function(e,t){return a({id:e,layout:t})},drawWeaponEvolution:function(e,s,a,r){var i=[];for(var n=0;n<Math.max(s.length,r.length);n++){i.push("+"+n)}$("#weapons-evolution").highcharts({chart:{height:t},title:{text:"Weapons damage evolution"},credits:{enabled:false},yAxis:{title:{text:"Total Damage"}},xAxis:{categories:i},series:[{data:s,name:e},{data:r,name:a}]})},drawShieldEvolution:function(e,s,a,r){var i=[];for(var n=0;n<Math.max(s.length,r.length);n++){i.push("+"+n)}$("#shields-evolution").highcharts({chart:{height:t},title:{text:"Shields stability evolution"},credits:{enabled:false},yAxis:{title:{text:"Stability"}},xAxis:{categories:i},series:[{data:s,name:e},{data:r,name:a}]})},drawShieldsReductions:function(e,s,a,r,i){$("#shields-reduction").highcharts({chart:{polar:true,type:"line",height:t},title:{text:"Shields Reduction"},credits:{enabled:false},xAxis:{categories:e,lineWidth:0},yAxis:{gridLineInterpolation:"polygon",lineWidth:0,min:0},legend:{align:"center",verticalAlign:"bottom",layout:"vertical"},series:[{name:s,data:a,pointPlacement:"on"},{name:r,data:i,pointPlacement:"on"}]})},drawArmorEvolutions:function(e){var s=[];for(var a=0;a<Math.max(e[0].resistances.length,e[1].resistances.length);a++){s.push("+"+a)}$("#sets-defense-evolution").highcharts({chart:{height:t},title:{text:"Defense evolution by set"},credits:{enabled:false},yAxis:{title:{text:"Total defense (physical + elemental)"}},xAxis:{categories:s},series:[{data:e[0].defenses,name:e[0].name},{data:e[1].defenses,name:e[1].name}]});$("#sets-resistance-evolution").highcharts({chart:{height:t},title:{text:"Resistance evolution by set"},credits:{enabled:false},yAxis:{title:{text:"Total resistance (all resistances)"}},xAxis:{categories:s},series:[{data:e[0].resistances,name:e[0].name},{data:e[1].resistances,name:e[1].name}]})},drawArmorDefenses:function(e,s,a,r,i){$("#sets-defense").highcharts({chart:{polar:true,type:"line",height:t},credits:{enabled:false},title:{text:"Defenses by set"},xAxis:{categories:e,lineWidth:0},yAxis:{gridLineInterpolation:"polygon",lineWidth:0,min:0},legend:{align:"center",verticalAlign:"bottom",layout:"vertical"},series:[{name:s,data:a,pointPlacement:"on"},{name:r,data:i,pointPlacement:"on"}]})},unescape:function(e){e=unescape(e);return e},parseValue:function(e){var t=parseFloat(e);return isNaN(t)?0:t}}}();var C=Backbone.View.extend({initialize:function(){this.isArmor=true;this.contentTemplate=Handlebars.compile($("#content-template").html());this.statsBoxTemplate=Handlebars.compile($("#stats-box-template").html());this.chartBoxTemplate=Handlebars.compile($("#chart-box-template").html())},calculateSetStats:function(e){var t=new T;for(var s=0;s<e.pieces.length;s++){var a=e.pieces[s];t.elemental_defense.fire+=parseFloat(a.elemental_defense.fire);t.elemental_defense.lightning+=parseFloat(a.elemental_defense.lightning);t.elemental_defense.magic+=parseFloat(a.elemental_defense.magic);t.physical_defense.regular+=parseFloat(a.physical_defense.regular);t.physical_defense.strike+=parseFloat(a.physical_defense.strike);t.physical_defense.slash+=parseFloat(a.physical_defense.slash);t.physical_defense.thrust+=parseFloat(a.physical_defense.thrust);t.resistances.bleed+=parseFloat(a.resistances.bleed);t.resistances.poison+=parseFloat(a.resistances.poison);t.resistances.curse+=parseFloat(a.resistances.curse);t.weight+=parseFloat(a.weight);t.poise+=parseFloat(a.poise);t.durability+=parseInt(a.durability);if(t.name===""){t.name=a.set}else if(a.set!==t.name){t.name="Custom Set"}t.type=a.type}return t},renderSets:function(e,t){var s=B.renderImage(e,"type");var a=B.renderImage(t,"type");var r="";r+=this.renderPhysicalDefense(e,t);r+=this.renderElementalDefense(e,t);r+=this.renderResistances(e,t);r+=this.renderOthers(e,t);return this.contentTemplate({body:r,description1:s,description2:a})},renderPiece:function(e){var t="";var s=_.find(this.armor1.pieces,{piece:e})||{};var a=_.find(this.armor2.pieces,{piece:e})||{};var r=B.renderImage(s,"type");var i=B.renderImage(a,"type");var t="";t+=this.renderPhysicalDefense(s,a);t+=this.renderElementalDefense(s,a);t+=this.renderResistances(s,a);t+=this.renderOthers(s,a);return this.contentTemplate({body:t,description1:r,description2:i})},renderPhysicalDefense:function(e,t){var s="",a=e.physical_defense||{},r=t.physical_defense||{};s+=B.renderAttribute("darksouls1/icon_regular_defense","Regular",a.regular,r.regular);s+=B.renderAttribute("darksouls1/icon_strike_defense","Strike",a.strike,r.strike);s+=B.renderAttribute("darksouls1/icon_slash_defense","Slashsh",a.slash,r.slash);s+=B.renderAttribute("darksouls1/icon_thrust_defense","Thrust",a.thrust,r.thrust);return this.statsBoxTemplate({title:"Physical Defense",name1:e.name,name2:t.name,stats:s,isArmor:this.isArmor})},renderElementalDefense:function(e,t){var s="",a=e.elemental_defense||{},r=t.elemental_defense||{};s+=B.renderAttribute("darksouls1/icon_fire_defense","Fire",a.fire,r.fire);s+=B.renderAttribute("darksouls1/icon_magic_defense","Magic",a.magic,r.magic);s+=B.renderAttribute("darksouls1/icon_lightning_defense","Lightning",a.lightning,r.lightning);return this.statsBoxTemplate({title:"Elemental Defense",name1:e.name,name2:t.name,stats:s,isArmor:this.isArmor})},renderResistances:function(e,t){var s="",a=e.resistances||{},r=t.resistances||{};s+=B.renderAttribute("darksouls1/icon_bleed","Bleed",a.bleed,r.bleed);s+=B.renderAttribute("darksouls1/icon_poison","Poison",a.poison,r.poison);s+=B.renderAttribute("darksouls1/icon_curse","Curse",a.curse,r.curse);return this.statsBoxTemplate({title:"Resistances",name1:e.name,name2:t.name,stats:s,isArmor:this.isArmor})},renderOthers:function(e,t){var s="";s+=B.renderAttribute("darksouls1/icon_poise","Poise",e.poise,t.poise);s+=B.renderAttribute("darksouls1/icon_weight","Weight",e.weight,t.weight,{isNegative:true});s+=B.renderAttribute("darksouls1/icon_durability","Durability",e.durability,t.durability,{isInteger:true});return this.statsBoxTemplate({title:"Others",name1:e.name,name2:t.name,stats:s,isArmor:this.isArmor})},render:function(e,t){this.armor1=e;this.armor2=t;this.set1=this.calculateSetStats(this.armor1);this.set2=this.calculateSetStats(this.armor2);var s=this.renderSets(this.set1,this.set2);s+=B.renderChartBox("sets-defense-evolution","col-sm-12 col-md-6 col-lg-4");s+=B.renderChartBox("sets-resistance-evolution","col-sm-12 col-md-6 col-lg-4");s+=B.renderChartBox("sets-defense","col-sm-12 col-md-6 col-lg-4");s+=this.renderPiece("Head");s+=this.renderPiece("Chest");s+=this.renderPiece("Hands");s+=this.renderPiece("Legs");this.$el.html(s);this.renderDefensesChart(this.set1,this.set2)}});var T=function(e,t){this.elemental_defense={fire:0,lightning:0,magic:0};this.physical_defense={regular:0,strike:0,slash:0,thrust:0};this.resistances={bleed:0,poison:0,curse:0};this.weight=0;this.poise=0;this.durability=0;this.name=e?e:"";this.type="N/A";if(t){this.piece=t.capitalize()}};T.constructor.prototype=T;C.prototype.renderSetsEvolution=function(e,t){var s=[{name:null,defenses:new Array(e[0].data.length),resistances:new Array(e[0].data.length)},{name:null,defenses:new Array(t[0].data.length),resistances:new Array(t[0].data.length)}];e.forEach(function(e){e.data.forEach(function(e){var t=0,a=0;var r=e.set.split("+")[0].trim();if(s[0].name&&s[0].name!==r&&s[0].name!=="Custom Set"){s[0].name="Custom Set"}else if(!s[0].name){s[0].name=r}t+=B.parseValue(e.physical_defense.regular);t+=B.parseValue(e.physical_defense.slash);t+=B.parseValue(e.physical_defense.strike);t+=B.parseValue(e.physical_defense.thrust);t+=B.parseValue(e.elemental_defense.fire);t+=B.parseValue(e.elemental_defense.magic);t+=B.parseValue(e.elemental_defense.lightning);a+=B.parseValue(e.resistances.bleed);a+=B.parseValue(e.resistances.curse);a+=B.parseValue(e.resistances.poison);if(!s[0].defenses[e.level])s[0].defenses[e.level]=0;if(!s[0].resistances[e.level])s[0].resistances[e.level]=0;s[0].defenses[e.level]+=t;s[0].resistances[e.level]+=a})});t.forEach(function(e){e.data.forEach(function(e){var t=0,a=0;var r=e.set.split("+")[0].trim();if(s[1].name&&s[1].name!==r&&s[1].name!=="Custom Set"){s[1].name="Custom Set"}else if(!s[1].name){s[1].name=r}t+=B.parseValue(e.physical_defense.regular);t+=B.parseValue(e.physical_defense.slash);t+=B.parseValue(e.physical_defense.strike);t+=B.parseValue(e.physical_defense.thrust);t+=B.parseValue(e.elemental_defense.fire);t+=B.parseValue(e.elemental_defense.magic);t+=B.parseValue(e.elemental_defense.lightning);a+=B.parseValue(e.resistances.bleed);a+=B.parseValue(e.resistances.curse);a+=B.parseValue(e.resistances.poison);if(!s[1].defenses[e.level])s[1].defenses[e.level]=0;if(!s[1].resistances[e.level])s[1].resistances[e.level]=0;s[1].defenses[e.level]+=t;s[1].resistances[e.level]+=a})});B.drawArmorEvolutions(s)};C.prototype.renderDefensesChart=function(e,t){var s=["Regular Def","Slash Def","Strike Def","Thrust Def","Fire Def","Magic Red","Lightning Red","Bleed Res","Poison Res","Curse Res","Poise","Weight"];var a=[B.parseValue(e.physical_defense.regular),B.parseValue(e.physical_defense.slash),B.parseValue(e.physical_defense.strike),B.parseValue(e.physical_defense.thrust),B.parseValue(e.elemental_defense.fire),B.parseValue(e.elemental_defense.magic),B.parseValue(e.elemental_defense.lightning),B.parseValue(e.resistances.bleed),B.parseValue(e.resistances.poison),B.parseValue(e.resistances.curse),B.parseValue(e.poise),B.parseValue(e.weight)];var r=[B.parseValue(t.physical_defense.regular),B.parseValue(t.physical_defense.slash),B.parseValue(t.physical_defense.strike),B.parseValue(t.physical_defense.thrust),B.parseValue(t.elemental_defense.fire),B.parseValue(t.elemental_defense.magic),B.parseValue(t.elemental_defense.lightning),B.parseValue(t.resistances.bleed),B.parseValue(t.resistances.poison),B.parseValue(t.resistances.curse),B.parseValue(t.poise),B.parseValue(t.weight)];B.drawArmorDefenses(s,e.name,a,t.name,r)};var E=Backbone.View.extend({initialize:function(){this.isArmor=false;this.contentTemplate=Handlebars.compile($("#content-template").html());this.statsBoxTemplate=Handlebars.compile($("#stats-box-template").html())},renderDamageStats:function(e,t){var s="",a=e.stats,r=t.stats;s+=B.renderAttribute("darksouls1/icon_physical_damage","Regular",a.physical_damage,r.physical_damage);s+=B.renderAttribute("darksouls1/icon_magic_damage","Magic",a.magic_damage,r.magic_damage);s+=B.renderAttribute("darksouls1/icon_fire_damage","Fire",a.fire_damage,r.fire_damage);s+=B.renderAttribute("darksouls1/icon_lightning_damage","Lightning",a.lightning_damage,r.lightning_damage);s+=B.renderAttribute("darksouls1/icon_critical","Critical",a.critical,r.critical);return this.statsBoxTemplate({title:"Damage",name1:e.name,name2:t.name,stats:s,isArmor:this.isArmor})},renderReductionStats:function(e,t){var s="",a=e.stats,r=t.stats;s+=B.renderAttribute("darksouls1/icon_physical_reduction","Physical",a.physical_reduction,r.physical_reduction);s+=B.renderAttribute("darksouls1/icon_magic_reduction","Magic",a.magic_reduction,r.magic_reduction);s+=B.renderAttribute("darksouls1/icon_fire_reduction","Fire",a.fire_reduction,r.fire_reduction);s+=B.renderAttribute("darksouls1/icon_lightning_reduction","Lightning",a.lightning_reduction,r.lightning_reduction);s+=B.renderAttribute("darksouls1/icon_stability","Stability",a.stability,r.stability);return this.statsBoxTemplate({title:"Reduction",name1:e.name,name2:t.name,stats:s,isArmor:this.isArmor})},renderParamBonus:function(e,t){var s="",a=e.param_bonus,r=t.param_bonus;s+=B.renderAttribute("darksouls1/icon_strength","Strength",a.strength,r.strength,{isNegative:true,isString:true,invertSymbols:true});s+=B.renderAttribute("darksouls1/icon_dexterity","Dexterity",a.dexterity,r.dexterity,{isNegative:true,isString:true,invertSymbols:true});s+=B.renderAttribute("darksouls1/icon_intelligence","Intelligence",a.intelligence,r.intelligence,{isNegative:true,isString:true,invertSymbols:true});s+=B.renderAttribute("darksouls1/icon_faith","Faith",a.faith,r.faith,{isNegative:true,isString:true,invertSymbols:true});return this.statsBoxTemplate({title:"Param Bonus",name1:e.name,name2:t.name,stats:s,isArmor:this.isArmor})},renderReqParams:function(e,t){var s="",a=e.req_param,r=t.req_param;s+=B.renderAttribute("darksouls1/icon_strength","Strength",a.strength,r.strength,{isNegative:true,isInteger:true});s+=B.renderAttribute("darksouls1/icon_dexterity","Dexterity",a.dexterity,r.dexterity,{isNegative:true,isInteger:true});s+=B.renderAttribute("darksouls1/icon_intelligence","Intelligence",a.intelligence,r.intelligence,{isNegative:true,isInteger:true});s+=B.renderAttribute("darksouls1/icon_faith","Faith",a.faith,r.faith,{isNegative:true,isInteger:true});return this.statsBoxTemplate({title:"Req Params",name1:e.name,name2:t.name,stats:s,isArmor:this.isArmor})},renderAuxEffects:function(e,t){var s="",a=e.aux_effect,r=t.aux_effect;s+=B.renderAttribute("darksouls1/icon_bleed","Bleed",a.bleed,r.bleed,{isInteger:true});s+=B.renderAttribute("darksouls1/icon_toxic","Toxic",a.toxic,r.toxic,{isInteger:true});s+=B.renderAttribute("darksouls1/icon_occult","Occult",a.occult,r.occult,{isInteger:true});s+=B.renderAttribute("darksouls1/icon_divine","Divine",a.divine,r.divine,{isInteger:true});return this.statsBoxTemplate({title:"Aux Effects",name1:e.name,name2:t.name,stats:s,isArmor:this.isArmor})},renderResistances:function(e,t){var s="",a=e.resistances,r=t.resistances;s+=B.renderAttribute("darksouls1/icon_bleed","Bleed",a.bleed,r.bleed,{isPercentage:true});s+=B.renderAttribute("darksouls1/icon_poison","Poison",a.poison,r.poison,{isPercentage:true});s+=B.renderAttribute("darksouls1/icon_toxic","Toxic",a.toxic,r.toxic,{isPercentage:true});s+=B.renderAttribute("darksouls1/icon_curse","Curse",a.curse,r.curse,{isPercentage:true});return this.statsBoxTemplate({title:"Resistances",name1:e.name,name2:t.name,stats:s,isArmor:this.isArmor})},renderOthers:function(e,t){var s="";s+=B.renderAttribute("darksouls1/icon_weight","Weight",e.weight,t.weight,{isNegative:true});s+=B.renderAttribute("darksouls1/icon_durability","Durability",e.durability,t.durability,{isInteger:true});if(e.magic_adjust||t.magic_adjust){s+=B.renderAttribute("darksouls1/icon_magic_adjust","Magic Adjust",e.magic_adjust,t.magic_adjust,{isInteger:true})}return this.statsBoxTemplate({title:"Others",name1:e.name,name2:t.name,stats:s,isArmor:this.isArmor})},render:function(e,t,s){var a=B.renderImage(e,"attack_type","weapon_type");var r=B.renderImage(t,"attack_type","weapon_type");var i="";i+=this.renderDamageStats(e,t);i+=this.renderReductionStats(e,t);i+=this.renderParamBonus(e,t);i+=this.renderReqParams(e,t);if(s){i+=this.renderResistances(e,t)}else{i+=this.renderAuxEffects(e,t)}i+=this.renderOthers(e,t);i+=B.renderChartBox("weapons-evolution","col-sm-12 col-md-12");i+=B.renderChartBox("shields-evolution","col-sm-6 col-md-6");i+=B.renderChartBox("shields-reduction","col-sm-6 col-md-6");content=this.contentTemplate({body:i,description1:a,description2:r});this.$el.html(content)}});E.prototype.renderWeaponsEvolution=function(e,t){var s=e.data.map(function(e){var t=0;t+=B.parseValue(e.stats.physical_damage);t+=B.parseValue(e.stats.magic_damage);t+=B.parseValue(e.stats.fire_damage);t+=B.parseValue(e.stats.lightning_damage);return t});var a=t.data.map(function(e){var t=0;t+=B.parseValue(e.stats.physical_damage);t+=B.parseValue(e.stats.magic_damage);t+=B.parseValue(e.stats.fire_damage);t+=B.parseValue(e.stats.lightning_damage);return t});B.drawWeaponEvolution(e.name,s,t.name,a)};E.prototype.renderShieldsEvolution=function(e,t){var s=e.data.map(function(e){return B.parseValue(e.stats.stability)});var a=t.data.map(function(e){return B.parseValue(e.stats.stability)});B.drawShieldEvolution(e.name,s,t.name,a)};E.prototype.renderReductionsChart=function(e,t){var s=["Physical Red","Fire Red","Magic Red","Lightning Red","Bleed Res","Poison Res","Curse Res","Stability","Weight"];var a=[B.parseValue(e.stats.physical_reduction),B.parseValue(e.stats.magic_reduction),B.parseValue(e.stats.fire_reduction),B.parseValue(e.stats.lightning_reduction),B.parseValue(e.resistances.bleed),B.parseValue(e.resistances.poison),B.parseValue(e.resistances.curse),B.parseValue(e.stats.stability),B.parseValue(e.weight)];var r=[B.parseValue(t.stats.physical_reduction),B.parseValue(t.stats.magic_reduction),B.parseValue(t.stats.fire_reduction),B.parseValue(t.stats.lightning_reduction),B.parseValue(t.resistances.bleed),B.parseValue(t.resistances.poison),B.parseValue(t.resistances.curse),B.parseValue(t.stats.stability),B.parseValue(t.weight)];B.drawShieldsReductions(s,e.name,a,t.name,r)};var F=Backbone.View.extend({initialize:function(){this.isArmor=true;this.contentTemplate=Handlebars.compile($("#content-template").html());this.statsBoxTemplate=Handlebars.compile($("#stats-box-template").html())},calculateSetStats:function(e){var t=new I;for(var s=0;s<e.pieces.length;s++){var a=e.pieces[s];t.stats.physical_defense+=parseFloat(a.stats.physical_defense);t.stats.strike_defense+=parseFloat(a.stats.strike_defense);t.stats.slash_defense+=parseFloat(a.stats.slash_defense);t.stats.thrust_defense+=parseFloat(a.stats.thrust_defense);t.stats.fire_defense+=parseFloat(a.stats.fire_defense);t.stats.lightning_defense+=parseFloat(a.stats.lightning_defense);t.stats.magic_defense+=parseFloat(a.stats.magic_defense);t.stats.dark_defense+=parseFloat(a.stats.dark_defense);t.stats.bleed_resist+=parseFloat(a.stats.bleed_resist);t.stats.poison_resist+=parseFloat(a.stats.poison_resist);t.stats.curse_resist+=parseFloat(a.stats.curse_resist);t.stats.dark_resist+=parseFloat(a.stats.dark_resist);t.stats.weight+=parseFloat(a.stats.weight);t.stats.poise+=parseFloat(a.stats.poise);t.stats.durability+=parseInt(a.stats.durability);if(t.name===""){t.name=a.set}else if(a.set!==t.name){t.name="Custom Set"}t.type=a.type}return t},renderSets:function(e,t){var s=B.renderImage(e,"type");var a=B.renderImage(t,"type");var r="";r+=this.renderPhysicalDefense(e,t);r+=this.renderElementalDefense(e,t);r+=this.renderResistances(e,t);r+=this.renderOthers(e,t);return this.contentTemplate({body:r,description1:s,description2:a})},renderPiece:function(e){var t="";var s=_.find(this.armor1.pieces,{piece:e});var a=_.find(this.armor2.pieces,{piece:e});if(s===undefined&&a===undefined){return""}else if(s===undefined&&a){s=new I(null,e)}else if(a===undefined&&s){a=new I(null,e)}var r=B.renderImage(s,"type");var i=B.renderImage(a,"type");var t="";t+=this.renderPhysicalDefense(s,a);t+=this.renderElementalDefense(s,a);t+=this.renderResistances(s,a);t+=this.renderOthers(s,a);return this.contentTemplate({body:t,description1:r,description2:i})},renderPhysicalDefense:function(e,t){var s="",a=e.stats||{},r=t.stats||{};s+=B.renderAttribute("darksouls2/icon_physical_reduction","Physical",a.physical_defense,r.physical_defense);s+=B.renderAttribute("darksouls2/icon_strike_reduction","Strike",a.strike_defense,r.strike_defense);s+=B.renderAttribute("darksouls2/icon_slash_reduction","Slash",a.slash_defense,r.slash_defense);s+=B.renderAttribute("darksouls2/icon_thrust_reduction","Thrust",a.thrust_defense,r.thrust_defense);return this.statsBoxTemplate({title:"Physical Defense",name1:e.name,name2:t.name,stats:s,isArmor:this.isArmor})},renderElementalDefense:function(e,t){var s="",a=e.stats||{},r=t.stats||{};s+=B.renderAttribute("darksouls2/icon_fire_reduction","Fire",a.fire_defense,r.fire_defense);s+=B.renderAttribute("darksouls2/icon_magic_reduction","Magic",a.magic_defense,r.magic_defense);s+=B.renderAttribute("darksouls2/icon_lightning_reduction","Lightning",a.lightning_defense,r.lightning_defense);s+=B.renderAttribute("darksouls2/icon_dark_reduction","Dark",a.dark_defense,r.dark_defense);return this.statsBoxTemplate({title:"Elemental Defense",name1:e.name,name2:t.name,stats:s,isArmor:this.isArmor})},renderResistances:function(e,t){var s="",a=e.stats||{},r=t.stats||{};s+=B.renderAttribute("darksouls2/icon_bleed_reduction","Bleed",a.bleed_resist,r.bleed_resist);s+=B.renderAttribute("darksouls2/icon_poison_reduction","Poison",a.poison_resist,r.poison_resist);s+=B.renderAttribute("darksouls2/icon_curse_reduction","Curse",a.curse_resist,r.curse_resist);s+=B.renderAttribute("darksouls2/icon_petrify_reduction","Petrify",a.petrify_resist,r.petrify_resist);return this.statsBoxTemplate({title:"Resistances",name1:e.name,name2:t.name,stats:s,isArmor:this.isArmor})},renderReqParams:function(e,t){var s="",a=e.req_param||{},r=t.req_param||{};s+=B.renderAttribute("darksouls2/icon_strength","Strength",a.strength,r.strength);s+=B.renderAttribute("darksouls2/icon_dexterity","Dexterity",a.dexterity,r.dexterity);s+=B.renderAttribute("darksouls2/icon_intelligence","Intelligence",a.intelligence,r.intelligence);s+=B.renderAttribute("darksouls2/icon_faith","Faith",a.faith,r.faith);return this.statsBoxTemplate({title:"Req Param",name1:e.name,name2:t.name,stats:s,isArmor:this.isArmor})},renderOthers:function(e,t){var s="",a=e.stats||{},r=t.stats||{};s+=B.renderAttribute("darksouls2/icon_poise","Poise",a.poise,r.poise);s+=B.renderAttribute("darksouls2/icon_weight","Weight",a.weight,r.weight,{isNegative:true});s+=B.renderAttribute("darksouls2/icon_durability","Durability",a.durability,r.durability,{isInteger:true});return this.statsBoxTemplate({title:"Others",name1:e.name,name2:t.name,stats:s,isArmor:this.isArmor})},render:function(e,t){this.armor1=e;this.armor2=t;this.set1=this.calculateSetStats(this.armor1);this.set2=this.calculateSetStats(this.armor2);var s=this.renderSets(this.set1,this.set2);s+=this.renderPiece("Head");s+=this.renderPiece("Chest");s+=this.renderPiece("Hands");s+=this.renderPiece("Legs");this.$el.html(s)}});var I=function(e,t){
this.stats={fire_defense:0,lightning_defense:0,magic_defense:0,dark_defense:0,physical_defense:0,strike_defense:0,slash_defense:0,thrust_defense:0,bleed_resist:0,poison_resist:0,curse_resist:0,petrify_resist:0,weight:0,poise:0,durability:0};this.req_param={strength:0,dexterity:0,intelligence:0,faith:0};this.physical_defense_bonus="-";this.name=e?e:t?"Naked "+t:"";this.type="N/A";if(t){this.piece=t.capitalize()}};I.constructor.prototype=I;F.prototype.renderSetsEvolution=function(e,t){var s=[{name:null,defenses:new Array(e[0].data.length),resistances:new Array(e[0].data.length)},{name:null,defenses:new Array(t[0].data.length),resistances:new Array(t[0].data.length)}];e.forEach(function(e){e.data.forEach(function(e){var t=0,a=0;var r=e.set.split("+")[0].trim();if(s[0].name&&s[0].name!==r&&s[0].name!=="Custom Set"){s[0].name="Custom Set"}else if(!s[0].name){s[0].name=r}t+=B.parseValue(e.stats.physical_defense);t+=B.parseValue(e.stats.slash_defense);t+=B.parseValue(e.stats.strike_defense);t+=B.parseValue(e.stats.thrust_defense);t+=B.parseValue(e.stats.fire_defense);t+=B.parseValue(e.stats.magic_defense);t+=B.parseValue(e.stats.lightning_defense);t+=B.parseValue(e.stats.dark_defense);a+=B.parseValue(e.stats.bleed_resist);a+=B.parseValue(e.stats.curse_resist);a+=B.parseValue(e.stats.poison_resist);a+=B.parseValue(e.stats.petrify_resist);if(!s[0].defenses[e.level])s[0].defenses[e.level]=0;if(!s[0].resistances[e.level])s[0].resistances[e.level]=0;s[0].defenses[e.level]+=t;s[0].resistances[e.level]+=a})});t.forEach(function(e){e.data.forEach(function(e){var t=0,a=0;var r=e.set.split("+")[0].trim();if(s[1].name&&s[1].name!==r&&s[1].name!=="Custom Set"){s[1].name="Custom Set"}else if(!s[1].name){s[1].name=r}t+=B.parseValue(e.stats.physical_defense);t+=B.parseValue(e.stats.slash_defense);t+=B.parseValue(e.stats.strike_defense);t+=B.parseValue(e.stats.thrust_defense);t+=B.parseValue(e.stats.fire_defense);t+=B.parseValue(e.stats.magic_defense);t+=B.parseValue(e.stats.lightning_defense);t+=B.parseValue(e.stats.dark_defense);a+=B.parseValue(e.stats.bleed_resist);a+=B.parseValue(e.stats.curse_resist);a+=B.parseValue(e.stats.poison_resist);a+=B.parseValue(e.stats.petrify_resist);if(!s[1].defenses[e.level])s[1].defenses[e.level]=0;if(!s[1].resistances[e.level])s[1].resistances[e.level]=0;s[1].defenses[e.level]+=t;s[1].resistances[e.level]+=a})});B.drawArmorEvolutions(s)};F.prototype.renderDefensesChart=function(e,t){var s=["Regular Def","Slash Def","Strike Def","Thrust Def","Fire Def","Magic Red","Lightning Red","Dark Res","Bleed Res","Poison Res","Curse Res","Petrify Res","Poise","Weight"];var a=[B.parseValue(e.stats.physical_defense),B.parseValue(e.stats.slash_defense),B.parseValue(e.stats.strike_defense),B.parseValue(e.stats.thrust_defense),B.parseValue(e.stats.fire_defense),B.parseValue(e.stats.magic_defense),B.parseValue(e.stats.lightning_defense),B.parseValue(e.stats.dark_defense),B.parseValue(e.stats.bleed_resist),B.parseValue(e.stats.poison_resist),B.parseValue(e.stats.curse_resist),B.parseValue(e.stats.petrify_resist),B.parseValue(e.stats.poise),B.parseValue(e.stats.weight)];var r=[B.parseValue(t.stats.physical_defense),B.parseValue(t.stats.slash_defense),B.parseValue(t.stats.strike_defense),B.parseValue(t.stats.thrust_defense),B.parseValue(t.stats.fire_defense),B.parseValue(t.stats.magic_defense),B.parseValue(t.stats.lightning_defense),B.parseValue(t.stats.dark_defense),B.parseValue(t.stats.bleed_resist),B.parseValue(t.stats.poison_resist),B.parseValue(t.stats.curse_resist),B.parseValue(t.stats.petrify_resist),B.parseValue(t.stats.poise),B.parseValue(t.stats.weight)];B.drawArmorDefenses(s,e.name,a,t.name,r)};var N=Backbone.View.extend({initialize:function(){this.isArmor=false;this.game="darksouls2";this.contentTemplate=Handlebars.compile($("#content-template").html());this.statsBoxTemplate=Handlebars.compile($("#stats-box-template").html())},renderDamageStats:function(e,t){var s="",a=e.stats,r=t.stats;s+=B.renderAttribute("darksouls2/icon_physical_damage","Physical",a.physical_damage,r.physical_damage);s+=B.renderAttribute("darksouls2/icon_magic_damage","Magic",a.magic_damage,r.magic_damage);s+=B.renderAttribute("darksouls2/icon_fire_damage","Fire",a.fire_damage,r.fire_damage);s+=B.renderAttribute("darksouls2/icon_lightning_damage","Lightning",a.lightning_damage,r.lightning_damage);s+=B.renderAttribute("darksouls2/icon_dark_damage","Dark",a.dark_damage,r.dark_damage);return this.statsBoxTemplate({title:"Damage",name1:e.name,name2:t.name,stats:s,game:this.game,isArmor:this.isArmor})},renderAuxDamageStats:function(e,t){var s="",a=e.stats,r=t.stats;s+=B.renderAttribute("darksouls2/icon_poison_damage","Poison",a.poison_damage,r.poison_damage);s+=B.renderAttribute("darksouls2/icon_bleed_damage","Bleed",a.bleed_damage,r.bleed_damage);s+=B.renderAttribute("darksouls2/icon_counter_damage","Counter",a.counter_damage,r.counter_damage);s+=B.renderAttribute("darksouls2/icon_poise_damage","Poise",a.poise_damage,r.poise_damage);return this.statsBoxTemplate({title:"Aux. Damage",name1:e.name,name2:t.name,stats:s,game:this.game,isArmor:this.isArmor})},renderReductionStats:function(e,t){var s="",a=e.stats,r=t.stats;s+=B.renderAttribute("darksouls2/icon_physical_reduction","Physical",a.physical_reduction,r.physical_reduction);s+=B.renderAttribute("darksouls2/icon_magic_reduction","Magic",a.magic_reduction,r.magic_reduction);s+=B.renderAttribute("darksouls2/icon_fire_reduction","Fire",a.fire_reduction,r.fire_reduction);s+=B.renderAttribute("darksouls2/icon_lightning_reduction","Lightning",a.lightning_reduction,r.lightning_reduction);s+=B.renderAttribute("darksouls2/icon_dark_reduction","Dark",a.dark_reduction,r.dark_reduction);return this.statsBoxTemplate({title:"Reduction",name1:e.name,name2:t.name,stats:s,game:this.game,isArmor:this.isArmor})},renderAuxReductionStats:function(e,t){var s="",a=e.stats,r=t.stats;s+=B.renderAttribute("darksouls2/icon_poison_reduction","Poison",a.poison_reduction,r.poison_reduction);s+=B.renderAttribute("darksouls2/icon_bleed_reduction","Bleed",a.bleed_reduction,r.bleed_reduction);s+=B.renderAttribute("darksouls2/icon_petrify_reduction","Petrify",a.petrify_reduction,r.petrify_reduction);s+=B.renderAttribute("darksouls2/icon_curse_reduction","Curse",a.curse_reduction,r.curse_reduction);return this.statsBoxTemplate({title:"Aux. Reduction",name1:e.name,name2:t.name,stats:s,game:this.game,isArmor:this.isArmor})},renderParamBonus:function(e,t){var s="",a=e.param_bonus,r=t.param_bonus;s+=B.renderAttribute("darksouls2/icon_strength_bonus","Strength",a.strength,r.strength,{isNegative:true,isString:true,invertSymbols:true});s+=B.renderAttribute("darksouls2/icon_dexterity_bonus","Dexterity",a.dexterity,r.dexterity,{isNegative:true,isString:true,invertSymbols:true});s+=B.renderAttribute("darksouls2/icon_magic_bonus","Magic",a.magic,r.magic,{isNegative:true,isString:true,invertSymbols:true});s+=B.renderAttribute("darksouls2/icon_fire_bonus","Fire",a.fire,r.fire,{isNegative:true,isString:true,invertSymbols:true});s+=B.renderAttribute("darksouls2/icon_lightning_bonus","Lightning",a.lightning,r.lightning,{isNegative:true,isString:true,invertSymbols:true});s+=B.renderAttribute("darksouls2/icon_dark_bonus","Dark",a.dark,r.dark,{isNegative:true,isString:true,invertSymbols:true});return this.statsBoxTemplate({title:"Param Bonus",name1:e.name,name2:t.name,stats:s,game:this.game,isArmor:this.isArmor})},renderReqParams:function(e,t){var s="",a=e.req_param,r=t.req_param;s+=B.renderAttribute("darksouls2/icon_strength","Strength",a.strength,r.strength,{isNegative:true,isInteger:true});s+=B.renderAttribute("darksouls2/icon_dexterity","Dexterity",a.dexterity,r.dexterity,{isNegative:true,isInteger:true});s+=B.renderAttribute("darksouls2/icon_intelligence","Intelligence",a.intelligence,r.intelligence,{isNegative:true,isInteger:true});s+=B.renderAttribute("darksouls2/icon_faith","Faith",a.faith,r.faith,{isNegative:true,isInteger:true});return this.statsBoxTemplate({title:"Req Params",name1:e.name,name2:t.name,stats:s,game:this.game,isArmor:this.isArmor})},renderOthers:function(e,t){var s="";s+=B.renderAttribute("darksouls2/icon_shot_range","Shot Range",e.stats.shot_range,t.stats.shot_range,{isNegative:true});s+=B.renderAttribute("darksouls2/icon_stability","Stability",e.stats.stability,t.stats.stability);s+=B.renderAttribute("darksouls2/icon_casting_speed","Casting Speed",e.stats.casting_speed,t.stats.casting_speed,{isNegative:true});s+=B.renderAttribute("darksouls2/icon_weight","Weight",e.stats.weight,t.stats.weight,{isNegative:true});s+=B.renderAttribute("darksouls2/icon_durability","Durability",e.stats.durability,t.stats.durability,{isInteger:true});return this.statsBoxTemplate({title:"Others",name1:e.name,name2:t.name,stats:s,game:this.game,isArmor:this.isArmor})},render:function(e,t,s){var a=B.renderImage(e,"attack_type","weapon_type");var r=B.renderImage(t,"attack_type","weapon_type");var i="";i+=this.renderDamageStats(e,t);i+=this.renderAuxDamageStats(e,t);i+=this.renderReductionStats(e,t);i+=this.renderParamBonus(e,t);i+=this.renderReqParams(e,t);i+=this.renderOthers(e,t);i+=B.renderChartBox("weapons-evolution","col-sm-12 col-md-12");i+=B.renderChartBox("shields-evolution","col-sm-6 col-md-6");i+=B.renderChartBox("shields-reduction","col-sm-6 col-md-6");content=this.contentTemplate({body:i,description1:a,description2:r});this.$el.html(content)}});N.prototype.renderWeaponsEvolution=function(e,t){var s=e.data.map(function(e){var t=0;t+=B.parseValue(e.stats.physical_damage);t+=B.parseValue(e.stats.magic_damage);t+=B.parseValue(e.stats.fire_damage);t+=B.parseValue(e.stats.lightning_damage);t+=B.parseValue(e.stats.dark_damage);return t});var a=t.data.map(function(e){var t=0;t+=B.parseValue(e.stats.physical_damage);t+=B.parseValue(e.stats.magic_damage);t+=B.parseValue(e.stats.fire_damage);t+=B.parseValue(e.stats.lightning_damage);t+=B.parseValue(e.stats.dark_damage);return t});B.drawWeaponEvolution(e.name,s,t.name,a)};N.prototype.renderShieldsEvolution=function(e,t){var s=e.data.map(function(e){return B.parseValue(e.stats.stability)});var a=t.data.map(function(e){return B.parseValue(e.stats.stability)});B.drawShieldEvolution(e.name,s,t.name,a)};N.prototype.renderReductionsChart=function(e,t){var s=["Physical Red","Fire Red","Magic Red","Lightning Red","Dark Red","Bleed Res","Poison Res","Curse Res","Petrify Res","Stability","Weight"];var a=[B.parseValue(e.stats.physical_reduction),B.parseValue(e.stats.magic_reduction),B.parseValue(e.stats.fire_reduction),B.parseValue(e.stats.lightning_reduction),B.parseValue(e.stats.dark_reduction),B.parseValue(e.stats.bleed_reduction),B.parseValue(e.stats.poison_reduction),B.parseValue(e.stats.curse_reduction),B.parseValue(e.stats.petrify_reduction),B.parseValue(e.stats.stability),B.parseValue(e.weight)];var r=[B.parseValue(t.stats.physical_reduction),B.parseValue(t.stats.magic_reduction),B.parseValue(t.stats.fire_reduction),B.parseValue(t.stats.lightning_reduction),B.parseValue(t.stats.dark_reduction),B.parseValue(t.stats.bleed_reduction),B.parseValue(t.stats.poison_reduction),B.parseValue(t.stats.curse_reduction),B.parseValue(t.stats.petrify_reduction),B.parseValue(t.stats.stability),B.parseValue(t.weight)];B.drawShieldsReductions(s,e.name,a,t.name,r)};